# ğŸ… Tamatar - Tomato Leaf Disease Detection PWA

A Progressive Web App for detecting diseases in tomato leaves using AI and image analysis.

## ğŸ“‹ Features

- ğŸ“¸ **Image Upload**: Support for file picker and camera capture on mobile devices
- ğŸ–¼ï¸ **Image Preview**: View selected images before submission
- ğŸ¤– **AI-Powered Analysis**: Backend REST API integration for disease prediction
- ğŸ“Š **Confidence Score**: Visual confidence indicator with interpretation
- ğŸ”„ **Offline Support**: Service worker caching for offline functionality
- ğŸ“± **Responsive Design**: Works seamlessly on mobile and desktop
- âš¡ **PWA Ready**: Installable as a native app on mobile devices

## ğŸ› ï¸ Tech Stack

- **Frontend Framework**: React 19
- **Build Tool**: Vite 7
- **Language**: JavaScript
- **PWA Plugin**: vite-plugin-pwa
- **Service Worker**: Workbox

## ğŸ“ Project Structure

```
tamatar/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ pwa-icon.svg           # PWA app icon
â”‚   â””â”€â”€ manifest.json           # Auto-generated by vite-plugin-pwa
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ImageUpload.jsx     # Image upload component with camera support
â”‚   â”‚   â”œâ”€â”€ ImageUpload.css     # Styles for ImageUpload
â”‚   â”‚   â”œâ”€â”€ ResultDisplay.jsx   # Display prediction results
â”‚   â”‚   â””â”€â”€ ResultDisplay.css   # Styles for ResultDisplay
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ api.js              # API service for backend communication
â”‚   â”œâ”€â”€ App.jsx                 # Main application component
â”‚   â”œâ”€â”€ App.css                 # Main app styles
â”‚   â”œâ”€â”€ main.jsx                # Entry point with SW registration
â”‚   â””â”€â”€ index.css               # Global styles
â”œâ”€â”€ .env.example                # Environment variables template
â”œâ”€â”€ vite.config.js              # Vite + PWA configuration
â”œâ”€â”€ package.json                # Dependencies and scripts
â””â”€â”€ shell.nix                   # Nix development environment

```

## ğŸš€ Getting Started

### Prerequisites

- **Nix** (recommended) or **Node.js 20+** with npm

### Installation

1. **Clone or navigate to the project directory:**
   ```bash
   cd tamatar
   ```

2. **Set up environment (if using Nix):**
   ```bash
   nix-shell ../shell.nix
   ```

3. **Install dependencies:**
   ```bash
   npm install
   ```

4. **Configure API endpoint:**
   ```bash
   cp .env.example .env
   # Edit .env and set your backend API URL
   # VITE_API_URL=http://your-backend-url:port
   ```

### Development

Run the development server:

```bash
# If using Nix:
nix-shell ../shell.nix --run "npm run dev"

# Or directly:
npm run dev
```

The app will be available at `http://localhost:5173`

### Build for Production

Build the optimized production bundle:

```bash
# If using Nix:
nix-shell ../shell.nix --run "npm run build"

# Or directly:
npm run build
```

The built files will be in the `dist/` directory.

### Preview Production Build

Preview the production build locally:

```bash
# If using Nix:
nix-shell ../shell.nix --run "npm run preview"

# Or directly:
npm run preview
```

## ğŸ”Œ Backend API Integration

The app expects a backend REST API with the following endpoint:

### POST `/predict`

**Request:**
- Method: `POST`
- Content-Type: `multipart/form-data`
- Body: Image file with key `image`

**Response:**
```json
{
  "disease": "Disease Name",
  "confidence": 0.95
}
```

**Example using Python Flask:**

```python
from flask import Flask, request, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

@app.route('/predict', methods=['POST'])
def predict():
    if 'image' not in request.files:
        return jsonify({'error': 'No image provided'}), 400
    
    image = request.files['image']
    
    # Your ML model prediction logic here
    # ...
    
    return jsonify({
        'disease': 'Early Blight',
        'confidence': 0.92
    })

@app.route('/health', methods=['GET'])
def health():
    return jsonify({'status': 'healthy'}), 200

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
```

## ğŸŒ PWA Features

### Service Worker

The app uses Workbox for service worker generation with:
- **Precaching**: Static assets are cached on install
- **Runtime Caching**: API responses cached with NetworkFirst strategy
- **Offline Support**: App shell works offline

### Web App Manifest

Auto-generated manifest includes:
- App name: "Tamatar - Tomato Leaf Disease Detection"
- Theme color: `#ff6347` (Tomato red)
- Icons: 192x192 and 512x512 PNG icons
- Display mode: Standalone
- Orientation: Portrait

### Installation

Users can install the app on:
- **Android**: Chrome "Add to Home Screen"
- **iOS**: Safari "Add to Home Screen"
- **Desktop**: Chrome/Edge install prompt

## ğŸ“± Mobile Features

- **Camera Integration**: Direct camera access on mobile devices
- **Responsive Design**: Optimized for all screen sizes
- **Touch-Friendly**: Large touch targets and gestures
- **Offline Ready**: Works without internet after initial load

## ğŸ¨ Customization

### Change Theme Color

Edit `vite.config.js`:
```javascript
manifest: {
  theme_color: '#your-color',
  background_color: '#your-bg-color',
}
```

### Change App Name

Edit `vite.config.js`:
```javascript
manifest: {
  name: 'Your App Name',
  short_name: 'Short Name',
}
```

### API Endpoint

Set in `.env`:
```
VITE_API_URL=http://your-api-url:port
```

## ğŸ› Troubleshooting

### Service Worker Not Updating

Clear browser cache and hard reload:
- Chrome: `Ctrl+Shift+R` (Windows/Linux) or `Cmd+Shift+R` (Mac)

### Camera Not Working

- Ensure HTTPS in production (required for camera API)
- Grant camera permissions in browser settings

### API Connection Failed

- Check `.env` file has correct API URL
- Verify backend is running and accessible
- Check CORS configuration on backend

## ğŸ“„ License

MIT License - Feel free to use for your projects!

## ğŸ¤ Contributing

Contributions are welcome! Feel free to open issues or submit pull requests.

---

**Built with â¤ï¸ for detecting tomato leaf diseases**
